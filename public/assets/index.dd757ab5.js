import{S as e,i as n,s as t,e as s,a,b as c,c as l,d as o,f as i,l as r,g as u,r as p,n as m,h as f,H as v,o as d,P as h,j as E,t as g,k as T,m as b,p as S,q as k,u as y,v as D,w as A}from"./vendor.1707b7c5.js";var O,I;(I=O||(O={})).SET_VIDEO="SET_VIDEO",I.LOAD_VIDEO="LOAD_VIDEO",I.UPDATE_STATE="UPDATE_STATE",I.SEEK="SEEK",I.PERSON_JOINED="PERSON_JOINED";function _(e){let n,t,f,v,d,h,E,g=e[5]&&function(e){let n,t,m,f,v,d,h,E,g,T,b;return{c(){n=s("div"),t=s("form"),m=s("input"),f=a(),v=s("input"),d=a(),h=s("button"),h.textContent="Change Video",E=a(),g=s("button"),g.textContent="Sync",c(m,"name","src"),c(m,"placeholder","Video"),c(m,"class","svelte-141kgkb"),c(v,"name","src"),c(v,"placeholder","Captions"),c(v,"class","svelte-141kgkb"),c(h,"type","submit"),c(h,"class","btn"),c(t,"class","svelte-141kgkb"),c(g,"class","btn"),c(n,"class","below svelte-141kgkb")},m(s,a){l(s,n,a),o(n,t),o(t,m),i(m,e[3]),o(t,f),o(t,v),i(v,e[4]),o(t,d),o(t,h),e[15](t),o(n,E),o(n,g),T||(b=[r(m,"input",e[13]),r(v,"input",e[14]),r(t,"submit",e[6]),r(g,"click",e[8])],T=!0)},p(e,n){8&n&&m.value!==e[3]&&i(m,e[3]),16&n&&v.value!==e[4]&&i(v,e[4])},d(t){t&&u(n),e[15](null),T=!1,p(b)}}}(e);return{c(){n=s("div"),t=s("video"),t.innerHTML='<track label="english" kind="captions" src="" srclang="en" default=""/>',f=a(),g&&g.c(),v=a(),d=s("div"),c(t,"height","400"),t.controls=!0,t.playsInline=!0,c(d,"class","chat svelte-141kgkb"),c(n,"class","player svelte-141kgkb")},m(s,a){l(s,n,a),o(n,t),e[9](t),o(n,f),g&&g.m(n,null),o(n,v),o(n,d),e[16](d),h||(E=[r(t,"play",e[10]),r(t,"pause",e[11]),r(t,"seeking",e[12])],h=!0)},p(e,[n]){e[5]&&g.p(e,n)},i:m,o:m,d(t){t&&u(n),e[9](null),g&&g.d(),e[16](null),h=!1,p(E)}}}function P(e,n,t){let s=window.location.search.includes("can_control");s&&setInterval((()=>fetch("/")),9e5);let a,c,l,o,i,r=prompt("Who this? ü§®"),u=!0;const p=f(""),m=new v;let g;p.on("connect",(()=>{p.emit(O.PERSON_JOINED,r)})),d((()=>{g=new h(a,{captions:{active:!0,update:!0},clickToPlay:s,keyboard:{global:s,focused:s},invertTime:!1,controls:[...s?["play-large","play","progress"]:[],"current-time","mute","volume","captions","settings","pip","airplay","fullscreen"]})})),p.onAny((()=>{u=!1}));const T=p.on;function b(e){u&&s&&p.emit(O.UPDATE_STATE,{state:e})}function S(){u&&s&&p.emit(O.SEEK,{timeStamp:a.currentTime})}p.on=function(e,n,...t){return T.apply(p,[e,function(...e){n(...e),setTimeout((()=>u=!0),0)},...t])},p.onAny(((...e)=>console.log("Received:",e))),p.on(O.PERSON_JOINED,(function(e){const n=document.createElement("p");n.innerText=`${e} joined!`,l.appendChild(n)})),p.on(O.LOAD_VIDEO,(function(e){e.src.endsWith(".mp4")?t(0,a.src=e.src,a):(m.loadSource(e.src),m.attachMedia(a)),t(0,a.currentTime=e.timeStamp,a),"PLAYING"===e.state?g.play():g.pause(),a.querySelector("track").src=e.captions})),p.on(O.UPDATE_STATE,(function(e){"PLAYING"===e.state?g.play():g.pause()})),p.on(O.SEEK,(function(e){g.currentTime=e.timeStamp}));return[a,c,l,o,i,s,function(e){e.preventDefault(),u&&s&&(p.emit(O.SET_VIDEO,{src:o,captions:i}),t(3,o=""),t(4,i=""))},b,S,function(e){E[e?"unshift":"push"]((()=>{a=e,t(0,a)}))},()=>b("PLAYING"),()=>b("PAUSED"),()=>S(),function(){o=this.value,t(3,o)},function(){i=this.value,t(4,i)},function(e){E[e?"unshift":"push"]((()=>{c=e,t(1,c)}))},function(e){E[e?"unshift":"push"]((()=>{l=e,t(2,l)}))}]}class N extends e{constructor(e){super(),n(this,e,P,_,t,{})}}function j(e){let n,t,o,i,p,f,v,d,h,E;return{c(){n=s("a"),n.textContent="What're you doing sussy baka? Don't come in here!",t=a(),o=s("h1"),o.innerHTML='Welcome to...\n      <br/> \n      <span class="neon svelte-cqvrju">Lonny&#39;s Cinema\n        <span class="version svelte-cqvrju">v2</span> \n      </span><span class="pop svelte-cqvrju">üçø</span>',i=a(),p=s("img"),v=a(),d=s("button"),d.textContent="Join ü§©",c(n,"class","secret svelte-cqvrju"),c(n,"href","shh.html"),c(o,"class","svelte-cqvrju"),k(p.src,f="michael.gif")||c(p,"src","michael.gif"),c(p,"alt","michael eating corn that has been popped"),c(p,"class","svelte-cqvrju"),c(d,"class","btn")},m(s,a){l(s,n,a),l(s,t,a),l(s,o,a),l(s,i,a),l(s,p,a),l(s,v,a),l(s,d,a),h||(E=r(d,"click",e[1]),h=!0)},p:m,i:m,o:m,d(e){e&&u(n),e&&u(t),e&&u(o),e&&u(i),e&&u(p),e&&u(v),e&&u(d),h=!1,E()}}}function q(e){let n,t;return n=new N({}),{c(){y(n.$$.fragment)},m(e,s){D(n,e,s),t=!0},p:m,i(e){t||(b(n.$$.fragment,e),t=!0)},o(e){g(n.$$.fragment,e),t=!1},d(e){A(n,e)}}}function L(e){let n,t,a,o;const i=[q,j],r=[];function p(e,n){return e[0]?0:1}return t=p(e),a=r[t]=i[t](e),{c(){n=s("main"),a.c(),c(n,"class","svelte-cqvrju")},m(e,s){l(e,n,s),r[t].m(n,null),o=!0},p(e,[s]){let c=t;t=p(e),t===c?r[t].p(e,s):(S(),g(r[c],1,1,(()=>{r[c]=null})),T(),a=r[t],a?a.p(e,s):(a=r[t]=i[t](e),a.c()),b(a,1),a.m(n,null))},i(e){o||(b(a),o=!0)},o(e){g(a),o=!1},d(e){e&&u(n),r[t].d()}}}function w(e,n,t){let s=!1;return[s,()=>t(0,s=!0)]}new class extends e{constructor(e){super(),n(this,e,w,L,t,{})}}({target:document.getElementById("app")});

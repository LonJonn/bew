import{S as t,i as n,s as e,e as s,a as c,b as o,c as a,d as u,f as i,l as r,g as l,r as m,n as p,h as f,H as d,j as E,t as T,k as S,m as A,o as h,p as D,q as v,u as _}from"./vendor.5d81f3aa.js";var g,y;(y=g||(g={})).SET_VIDEO="SET_VIDEO",y.LOAD_VIDEO="LOAD_VIDEO",y.UPDATE_STATE="UPDATE_STATE",y.SEEK="SEEK";function I(t){let n,e,f,d,E,T=t[3]&&function(t){let n,e,p,f,d,E,T,S;return{c(){n=s("form"),e=s("input"),p=c(),f=s("button"),f.textContent="Change Video",d=c(),E=s("button"),E.textContent="Sync",o(e,"name","src"),o(f,"type","submit")},m(s,c){a(s,n,c),u(n,e),i(e,t[2]),u(n,p),u(n,f),t[12](n),a(s,d,c),a(s,E,c),T||(S=[r(e,"input",t[11]),r(n,"submit",t[4]),r(E,"click",t[6])],T=!0)},p(t,n){4&n&&e.value!==t[2]&&i(e,t[2])},d(e){e&&l(n),t[12](null),e&&l(d),e&&l(E),T=!1,m(S)}}}(t);return{c(){n=s("div"),e=s("video"),e.innerHTML='<track kind="captions"/>',f=c(),T&&T.c(),o(e,"height","400"),e.controls=!0,o(n,"class","player svelte-1dhddcs")},m(s,c){a(s,n,c),u(n,e),t[7](e),u(n,f),T&&T.m(n,null),d||(E=[r(e,"play",t[8]),r(e,"pause",t[9]),r(e,"seeking",t[10])],d=!0)},p(t,[n]){t[3]&&T.p(t,n)},i:p,o:p,d(e){e&&l(n),t[7](null),T&&T.d(),d=!1,m(E)}}}function O(t,n,e){let s,c,o,a=window.location.search.includes("can_control"),u=!0;const i=f(""),r=new d;i.onAny((()=>{u=!1}));const l=i.on;function m(t){u&&a&&i.emit(g.UPDATE_STATE,{state:t})}function p(){u&&a&&i.emit(g.SEEK,{timeStamp:s.currentTime})}i.on=function(t,n,...e){return l.apply(i,[t,function(...t){n(...t),setTimeout((()=>u=!0),0)},...e])},i.onAny(((...t)=>console.log("Received:",t))),i.on(g.LOAD_VIDEO,(function(t){t.src.includes(".mp4")?e(0,s.src=t.src,s):(r.loadSource(t.src),r.attachMedia(s)),e(0,s.currentTime=t.timeStamp,s),"PLAYING"===t.state?s.play():s.pause()})),i.on(g.UPDATE_STATE,(function(t){"PLAYING"===t.state?s.play():s.pause()})),i.on(g.SEEK,(function(t){e(0,s.currentTime=t.timeStamp,s)}));return[s,c,o,a,function(t){t.preventDefault(),u&&a&&(i.emit(g.SET_VIDEO,{src:o}),e(2,o=""))},m,p,function(t){E[t?"unshift":"push"]((()=>{s=t,e(0,s)}))},()=>m("PLAYING"),()=>m("PAUSED"),()=>p(),function(){o=this.value,e(2,o)},function(t){E[t?"unshift":"push"]((()=>{c=t,e(1,c)}))}]}class k extends t{constructor(t){super(),n(this,t,O,I,e,{})}}function P(t){let n,e,c;return{c(){n=s("button"),n.textContent="Join",o(n,"class","join-btn svelte-tk5h9s")},m(s,o){a(s,n,o),e||(c=r(n,"click",t[1]),e=!0)},p:p,i:p,o:p,d(t){t&&l(n),e=!1,c()}}}function b(t){let n,e;return n=new k({}),{c(){D(n.$$.fragment)},m(t,s){v(n,t,s),e=!0},p:p,i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){T(n.$$.fragment,t),e=!1},d(t){_(n,t)}}}function L(t){let n,e,c,u;const i=[b,P],r=[];function m(t,n){return t[0]?0:1}return e=m(t),c=r[e]=i[e](t),{c(){n=s("main"),c.c(),o(n,"class","svelte-tk5h9s")},m(t,s){a(t,n,s),r[e].m(n,null),u=!0},p(t,[s]){let o=e;e=m(t),e===o?r[e].p(t,s):(h(),T(r[o],1,1,(()=>{r[o]=null})),S(),c=r[e],c?c.p(t,s):(c=r[e]=i[e](t),c.c()),A(c,1),c.m(n,null))},i(t){u||(A(c),u=!0)},o(t){T(c),u=!1},d(t){t&&l(n),r[e].d()}}}function V(t,n,e){let s=!1;return[s,()=>e(0,s=!0)]}new class extends t{constructor(t){super(),n(this,t,V,L,e,{})}}({target:document.getElementById("app")});

import{S as n,i as t,s as e,e as s,a,b as c,c as i,d as o,f as l,l as r,g as u,r as p,n as m,h as d,H as f,o as E,P as v,j as h,t as g,k as T,m as S,p as b,q as k,u as y,v as D,w as A}from"./vendor.1707b7c5.js";var O,I;(I=O||(O={})).SET_VIDEO="SET_VIDEO",I.LOAD_VIDEO="LOAD_VIDEO",I.UPDATE_STATE="UPDATE_STATE",I.SEEK="SEEK",I.PERSON_JOINED="PERSON_JOINED";function P(n){let t,e,d,f,E,v,h,g=n[5]&&function(n){let t,e,m,d,f,E,v,h,g,T,S;return{c(){t=s("div"),e=s("form"),m=s("input"),d=a(),f=s("input"),E=a(),v=s("button"),v.textContent="Change Video",h=a(),g=s("button"),g.textContent="Sync",c(m,"name","src"),c(m,"placeholder","Video"),c(m,"class","svelte-141kgkb"),c(f,"name","src"),c(f,"placeholder","Captions"),c(f,"class","svelte-141kgkb"),c(v,"type","submit"),c(v,"class","btn"),c(e,"class","svelte-141kgkb"),c(g,"class","btn"),c(t,"class","below svelte-141kgkb")},m(s,a){i(s,t,a),o(t,e),o(e,m),l(m,n[3]),o(e,d),o(e,f),l(f,n[4]),o(e,E),o(e,v),n[15](e),o(t,h),o(t,g),T||(S=[r(m,"input",n[13]),r(f,"input",n[14]),r(e,"submit",n[6]),r(g,"click",n[8])],T=!0)},p(n,t){8&t&&m.value!==n[3]&&l(m,n[3]),16&t&&f.value!==n[4]&&l(f,n[4])},d(e){e&&u(t),n[15](null),T=!1,p(S)}}}(n);return{c(){t=s("div"),e=s("video"),e.innerHTML='<track label="english" kind="captions" src="" srclang="en" default=""/>',d=a(),g&&g.c(),f=a(),E=s("div"),c(e,"height","400"),e.controls=!0,c(e,"crossorigin","anonymous"),e.playsInline=!0,c(E,"class","chat svelte-141kgkb"),c(t,"class","player svelte-141kgkb")},m(s,a){i(s,t,a),o(t,e),n[9](e),o(t,d),g&&g.m(t,null),o(t,f),o(t,E),n[16](E),v||(h=[r(e,"play",n[10]),r(e,"pause",n[11]),r(e,"seeking",n[12])],v=!0)},p(n,[t]){n[5]&&g.p(n,t)},i:m,o:m,d(e){e&&u(t),n[9](null),g&&g.d(),n[16](null),v=!1,p(h)}}}function _(n,t,e){let s,a,c,i,o,l=window.location.search.includes("can_control"),r=prompt("Who this? ü§®"),u=!0;const p=d(""),m=new f;let g;p.on("connect",(()=>{p.emit(O.PERSON_JOINED,r)})),E((()=>{g=new v(s,{captions:{active:!0,update:!0},clickToPlay:l,invertTime:!1,controls:[...l?["play-large","play","progress"]:[],"current-time","mute","volume","captions","settings","pip","airplay","fullscreen"]}),window.player=g})),window.Plyr=v,window.hls=m,p.onAny((()=>{u=!1}));const T=p.on;function S(n){u&&l&&p.emit(O.UPDATE_STATE,{state:n})}function b(){u&&l&&p.emit(O.SEEK,{timeStamp:s.currentTime})}p.on=function(n,t,...e){return T.apply(p,[n,function(...n){t(...n),setTimeout((()=>u=!0),0)},...e])},p.onAny(((...n)=>console.log("Received:",n))),p.on(O.PERSON_JOINED,(function(n){const t=document.createElement("p");t.innerText=`${n} joined!`,c.appendChild(t)})),p.on(O.LOAD_VIDEO,(function(n){n.src.includes(".mp4")?e(0,s.src=n.src,s):(m.loadSource(n.src),m.attachMedia(s)),e(0,s.currentTime=n.timeStamp,s),"PLAYING"===n.state?g.play():g.pause(),s.querySelector("track").src=n.captions})),p.on(O.UPDATE_STATE,(function(n){"PLAYING"===n.state?g.play():g.pause()})),p.on(O.SEEK,(function(n){g.currentTime=n.timeStamp}));return[s,a,c,i,o,l,function(n){n.preventDefault(),u&&l&&(p.emit(O.SET_VIDEO,{src:i,captions:o}),e(3,i=""),e(4,o=""))},S,b,function(n){h[n?"unshift":"push"]((()=>{s=n,e(0,s)}))},()=>S("PLAYING"),()=>S("PAUSED"),()=>b(),function(){i=this.value,e(3,i)},function(){o=this.value,e(4,o)},function(n){h[n?"unshift":"push"]((()=>{a=n,e(1,a)}))},function(n){h[n?"unshift":"push"]((()=>{c=n,e(2,c)}))}]}class w extends n{constructor(n){super(),t(this,n,_,P,e,{})}}function N(n){let t,e,o,l,p,d,f,E;return{c(){t=s("h1"),t.innerHTML='Welcome to...\n      <br/> \n      <span class="neon svelte-fzdvp0">Lonny&#39;s Cinema</span><span class="pop svelte-fzdvp0">üçø</span>',e=a(),o=s("img"),p=a(),d=s("button"),d.textContent="Join ü§©",c(t,"class","svelte-fzdvp0"),k(o.src,l="michael.gif")||c(o,"src","michael.gif"),c(o,"alt","michael eating corn that has been popped"),c(o,"class","svelte-fzdvp0"),c(d,"class","btn")},m(s,a){i(s,t,a),i(s,e,a),i(s,o,a),i(s,p,a),i(s,d,a),f||(E=r(d,"click",n[1]),f=!0)},p:m,i:m,o:m,d(n){n&&u(t),n&&u(e),n&&u(o),n&&u(p),n&&u(d),f=!1,E()}}}function L(n){let t,e;return t=new w({}),{c(){y(t.$$.fragment)},m(n,s){D(t,n,s),e=!0},p:m,i(n){e||(S(t.$$.fragment,n),e=!0)},o(n){g(t.$$.fragment,n),e=!1},d(n){A(t,n)}}}function V(n){let t,e,a,o;const l=[L,N],r=[];function p(n,t){return n[0]?0:1}return e=p(n),a=r[e]=l[e](n),{c(){t=s("main"),a.c(),c(t,"class","svelte-fzdvp0")},m(n,s){i(n,t,s),r[e].m(t,null),o=!0},p(n,[s]){let c=e;e=p(n),e===c?r[e].p(n,s):(b(),g(r[c],1,1,(()=>{r[c]=null})),T(),a=r[e],a?a.p(n,s):(a=r[e]=l[e](n),a.c()),S(a,1),a.m(t,null))},i(n){o||(S(a),o=!0)},o(n){g(a),o=!1},d(n){n&&u(t),r[e].d()}}}function C(n,t,e){let s=!1;return[s,()=>e(0,s=!0)]}new class extends n{constructor(n){super(),t(this,n,C,V,e,{})}}({target:document.getElementById("app")});

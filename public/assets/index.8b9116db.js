import{S as n,i as e,s as t,e as s,a,b as c,c as o,d as l,f as i,l as r,g as u,r as p,n as m,h as f,H as v,o as d,P as h,j as E,t as g,k as T,m as b,p as S,q as k,u as y,v as D,w as A}from"./vendor.1707b7c5.js";var O,I;(I=O||(O={})).SET_VIDEO="SET_VIDEO",I.LOAD_VIDEO="LOAD_VIDEO",I.UPDATE_STATE="UPDATE_STATE",I.SEEK="SEEK",I.PERSON_JOINED="PERSON_JOINED";function _(n){let e,t,f,v,d,h,E,g=n[5]&&function(n){let e,t,m,f,v,d,h,E,g,T,b;return{c(){e=s("div"),t=s("form"),m=s("input"),f=a(),v=s("input"),d=a(),h=s("button"),h.textContent="Change Video",E=a(),g=s("button"),g.textContent="Sync",c(m,"name","src"),c(m,"placeholder","Video"),c(m,"class","svelte-141kgkb"),c(v,"name","src"),c(v,"placeholder","Captions"),c(v,"class","svelte-141kgkb"),c(h,"type","submit"),c(h,"class","btn"),c(t,"class","svelte-141kgkb"),c(g,"class","btn"),c(e,"class","below svelte-141kgkb")},m(s,a){o(s,e,a),l(e,t),l(t,m),i(m,n[3]),l(t,f),l(t,v),i(v,n[4]),l(t,d),l(t,h),n[15](t),l(e,E),l(e,g),T||(b=[r(m,"input",n[13]),r(v,"input",n[14]),r(t,"submit",n[6]),r(g,"click",n[8])],T=!0)},p(n,e){8&e&&m.value!==n[3]&&i(m,n[3]),16&e&&v.value!==n[4]&&i(v,n[4])},d(t){t&&u(e),n[15](null),T=!1,p(b)}}}(n);return{c(){e=s("div"),t=s("video"),t.innerHTML='<track label="english" kind="captions" src="" srclang="en" default=""/>',f=a(),g&&g.c(),v=a(),d=s("div"),c(t,"height","400"),t.controls=!0,t.playsInline=!0,c(t,"crossorigin","anonymous"),c(d,"class","chat svelte-141kgkb"),c(e,"class","player svelte-141kgkb")},m(s,a){o(s,e,a),l(e,t),n[9](t),l(e,f),g&&g.m(e,null),l(e,v),l(e,d),n[16](d),h||(E=[r(t,"play",n[10]),r(t,"pause",n[11]),r(t,"seeking",n[12])],h=!0)},p(n,[e]){n[5]&&g.p(n,e)},i:m,o:m,d(t){t&&u(e),n[9](null),g&&g.d(),n[16](null),h=!1,p(E)}}}function P(n,e,t){let s=window.location.search.includes("can_control");s&&setInterval((()=>fetch("/")),9e5);let a,c,o,l,i,r=prompt("Who this? ü§®"),u=!0;const p=f(""),m=new v;let g;p.on("connect",(()=>{p.emit(O.PERSON_JOINED,r)})),d((()=>{g=new h(a,{captions:{active:!0,update:!0},clickToPlay:s,keyboard:{global:s,focused:s},invertTime:!1,controls:[...s?["play-large","play","progress"]:[],"current-time","mute","volume","captions","settings","pip","airplay","fullscreen"]})})),p.onAny((()=>{u=!1}));const T=p.on;function b(n){u&&s&&p.emit(O.UPDATE_STATE,{state:n})}function S(){u&&s&&p.emit(O.SEEK,{timeStamp:a.currentTime})}p.on=function(n,e,...t){return T.apply(p,[n,function(...n){e(...n),setTimeout((()=>u=!0),0)},...t])},p.onAny(((...n)=>console.log("Received:",n))),p.on(O.PERSON_JOINED,(function(n){const e=document.createElement("p");e.innerText=`${n} joined!`,o.appendChild(e)})),p.on(O.LOAD_VIDEO,(function(n){n.src.endsWith(".mp4")?t(0,a.src=n.src,a):(m.loadSource(n.src),m.attachMedia(a)),t(0,a.currentTime=n.timeStamp,a),"PLAYING"===n.state?g.play():g.pause(),a.querySelector("track").src=n.captions})),p.on(O.UPDATE_STATE,(function(n){"PLAYING"===n.state?g.play():g.pause()})),p.on(O.SEEK,(function(n){g.currentTime=n.timeStamp}));return[a,c,o,l,i,s,function(n){n.preventDefault(),u&&s&&(p.emit(O.SET_VIDEO,{src:l,captions:i}),t(3,l=""),t(4,i=""))},b,S,function(n){E[n?"unshift":"push"]((()=>{a=n,t(0,a)}))},()=>b("PLAYING"),()=>b("PAUSED"),()=>S(),function(){l=this.value,t(3,l)},function(){i=this.value,t(4,i)},function(n){E[n?"unshift":"push"]((()=>{c=n,t(1,c)}))},function(n){E[n?"unshift":"push"]((()=>{o=n,t(2,o)}))}]}class N extends n{constructor(n){super(),e(this,n,P,_,t,{})}}function j(n){let e,t,l,i,p,f,v,d,h,E;return{c(){e=s("a"),e.textContent="What're you doing sussy baka? Don't come in here!",t=a(),l=s("h1"),l.innerHTML='Welcome to...\n      <br/> \n      <span class="neon svelte-cqvrju">Lonny&#39;s Cinema\n        <span class="version svelte-cqvrju">v2</span> \n      </span><span class="pop svelte-cqvrju">üçø</span>',i=a(),p=s("img"),v=a(),d=s("button"),d.textContent="Join ü§©",c(e,"class","secret svelte-cqvrju"),c(e,"href","shh.html"),c(l,"class","svelte-cqvrju"),k(p.src,f="michael.gif")||c(p,"src","michael.gif"),c(p,"alt","michael eating corn that has been popped"),c(p,"class","svelte-cqvrju"),c(d,"class","btn")},m(s,a){o(s,e,a),o(s,t,a),o(s,l,a),o(s,i,a),o(s,p,a),o(s,v,a),o(s,d,a),h||(E=r(d,"click",n[1]),h=!0)},p:m,i:m,o:m,d(n){n&&u(e),n&&u(t),n&&u(l),n&&u(i),n&&u(p),n&&u(v),n&&u(d),h=!1,E()}}}function q(n){let e,t;return e=new N({}),{c(){y(e.$$.fragment)},m(n,s){D(e,n,s),t=!0},p:m,i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function L(n){let e,t,a,l;const i=[q,j],r=[];function p(n,e){return n[0]?0:1}return t=p(n),a=r[t]=i[t](n),{c(){e=s("main"),a.c(),c(e,"class","svelte-cqvrju")},m(n,s){o(n,e,s),r[t].m(e,null),l=!0},p(n,[s]){let c=t;t=p(n),t===c?r[t].p(n,s):(S(),g(r[c],1,1,(()=>{r[c]=null})),T(),a=r[t],a?a.p(n,s):(a=r[t]=i[t](n),a.c()),b(a,1),a.m(e,null))},i(n){l||(b(a),l=!0)},o(n){g(a),l=!1},d(n){n&&u(e),r[t].d()}}}function w(n,e,t){let s=!1;return[s,()=>t(0,s=!0)]}new class extends n{constructor(n){super(),e(this,n,w,L,t,{})}}({target:document.getElementById("app")});
